 :root{
    --bg1: #daf2ff;
    --bg2: #f7f7ff;
    --pink: #ff4d91;
    --pink-2: #ff7aa6;
    --card-bg: #fff6f8;
    --muted: #7b6f7a;
  }

  html,body{
    height:100%;
    margin:0;
    font-family: "Baloo 2", system-ui, Arial, sans-serif;
    background: linear-gradient(135deg, #87ceeb 0%, #b4e4ff 40%, #e0f4ff 100%);
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    position:relative;
  }

  /* Sol feliz */
  .sun{
    position:fixed;
    top:8%;
    right:12%;
    width:100px;
    height:100px;
    background: radial-gradient(circle, #ffeb3b 0%, #ffd54f 100%);
    border-radius:50%;
    box-shadow: 0 0 40px rgba(255,235,59,0.6);
    animation: sunPulse 4s ease-in-out infinite;
    z-index:0;
  }
  .sun::before{
    content:'üòä';
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:42px;
  }

  @media (max-width:768px){
    .sun{ width:70px; height:70px; top:5%; right:8%; }
    .sun::before{ font-size:30px; }
  }

  @keyframes sunPulse{
    0%, 100%{ transform: scale(1); }
    50%{ transform: scale(1.08); }
  }

  /* Nubes */
  .cloud{
    position:fixed;
    background: white;
    border-radius:100px;
    opacity:0.85;
    animation: cloudFloat 25s linear infinite;
    z-index:0;
  }
  
  .cloud::before,
  .cloud::after{
    content:'';
    position:absolute;
    background:white;
    border-radius:100px;
  }

  .cloud1{
    width:100px;
    height:40px;
    top:15%;
    left:-120px;
  }
  .cloud1::before{
    width:50px;
    height:50px;
    top:-25px;
    left:10px;
  }
  .cloud1::after{
    width:60px;
    height:40px;
    top:-20px;
    right:10px;
  }

  .cloud2{
    width:80px;
    height:35px;
    top:65%;
    left:-100px;
    animation-delay:-8s;
    animation-duration:30s;
  }
  .cloud2::before{
    width:45px;
    height:45px;
    top:-20px;
    left:8px;
  }
  .cloud2::after{
    width:50px;
    height:35px;
    top:-18px;
    right:8px;
  }

  .cloud3{
    width:120px;
    height:45px;
    top:40%;
    left:-140px;
    animation-delay:-16s;
    animation-duration:35s;
  }
  .cloud3::before{
    width:55px;
    height:55px;
    top:-28px;
    left:15px;
  }
  .cloud3::after{
    width:65px;
    height:45px;
    top:-25px;
    right:15px;
  }

  @media (max-width:768px){
    .cloud1{ width:70px; height:30px; }
    .cloud1::before{ width:35px; height:35px; top:-18px; }
    .cloud1::after{ width:40px; height:30px; top:-15px; }
    
    .cloud2{ width:60px; height:25px; }
    .cloud2::before{ width:32px; height:32px; top:-15px; }
    .cloud2::after{ width:35px; height:25px; top:-13px; }
    
    .cloud3{ width:85px; height:32px; }
    .cloud3::before{ width:40px; height:40px; top:-20px; }
    .cloud3::after{ width:45px; height:32px; top:-18px; }
  }

  @keyframes cloudFloat{
    0%{ transform: translateX(0); }
    100%{ transform: translateX(calc(100vw + 200px)); }
  }

  /* Jard√≠n en la parte inferior */
  .garden{
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 120px;
    background: linear-gradient(180deg, #7bc97f 0%, #5a9e5e 100%);
    z-index: 2;
    overflow: hidden;
  }

  .grass-blade{
    position: absolute;
    bottom: 0;
    width: 4px;
    background: #4a7c4e;
    border-radius: 50% 50% 0 0;
    animation: grassSway 2s ease-in-out infinite;
  }

  @keyframes grassSway{
    0%, 100%{ transform: rotate(-2deg); }
    50%{ transform: rotate(2deg); }
  }

  .stick-person{
    position: absolute;
    bottom: 20px;
  }

  .stick-person.boy{
    left: 35%;
  }

  .stick-person.girl{
    left: 45%;
  }

  .stick-head{
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #ffd1b3;
    border: 2px solid #8b4513;
    position: relative;
    margin: 0 auto;
  }

  .stick-body{
    width: 2px;
    height: 30px;
    background: #8b4513;
    margin: 0 auto;
  }

  .stick-arms{
    position: absolute;
    top: 25px;
    left: 50%;
    transform: translateX(-50%);
  }

  .stick-arm{
    width: 20px;
    height: 2px;
    background: #8b4513;
    position: absolute;
  }

  .stick-arm.left{
    transform: rotate(-45deg);
    right: 1px;
  }

  .stick-arm.right{
    transform: rotate(45deg);
    left: 1px;
  }

  .stick-legs{
    position: absolute;
    bottom: -25px;
    left: 50%;
    transform: translateX(-50%);
  }

  .stick-leg{
    width: 20px;
    height: 2px;
    background: #8b4513;
    position: absolute;
  }

  .stick-leg.left{
    transform: rotate(30deg);
    right: 1px;
  }

  .stick-leg.right{
    transform: rotate(-30deg);
    left: 1px;
  }

  /* Flor en la mano del chico */
  .flower-hand{
    position: absolute;
    top: 10px;
    left: -25px;
    font-size: 20px;
    animation: flowerBounce 2s ease-in-out infinite;
  }

  @keyframes flowerBounce{
    0%, 100%{ transform: translateY(0) rotate(-10deg); }
    50%{ transform: translateY(-5px) rotate(-15deg); }
  }

  /* Cabello */
  .hair{
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
  }

  .hair.boy-hair{
    width: 25px;
    height: 10px;
    background: #271f1a;
    border-radius: 50% 50% 0 0;
  }

  .hair.girl-hair{
    width: 30px;
    height: 20px;
    background: #2c1810;
    border-radius: 50% 50% 20% 20%;
  }
  .hair.girl-hair::before{
    content: '';
    position: absolute;
    width: 12px;
    height: 30px;
    background: #2c1810;
    border-radius: 50%;
    left: -8px;
    top: 5px;
  }

  .hair.girl-hair::after{
    content: '';
    position: absolute;
    width: 12px;
    height: 30px;
    background: #2c1810;
    border-radius: 50%;
    right: -8px;
    top: 5px;
  }

  /* √Årboles */
  .tree{
    position: absolute;
    bottom: 20px;
  }

  .tree.tree1{ left: 10%; }
  .tree.tree2{ right: 15%; }

  .tree-trunk{
    width: 12px;
    height: 35px;
    background: #8b4513;
    margin: 0 auto;
    border-radius: 2px;
  }

  .tree-leaves{
    width: 45px;
    height: 45px;
    background: #2d5016;
    border-radius: 50%;
    margin: -15px auto 0;
    position: relative;
  }

  .tree-leaves::before,
  .tree-leaves::after{
    content: '';
    position: absolute;
    width: 35px;
    height: 35px;
    background: #3a6b1f;
    border-radius: 50%;
  }

  .tree-leaves::before{
    top: -10px;
    left: -10px;
  }

  .tree-leaves::after{
    top: -10px;
    right: -10px;
  }

  /* Flores del jard√≠n */
  .garden-flower{
    position: absolute;
    bottom: 20px;
    animation: flowerSway 3s ease-in-out infinite;
  }

  @keyframes flowerSway{
    0%, 100%{ transform: rotate(-5deg); }
    50%{ transform: rotate(5deg); }
  }

  .garden-flower.f1{ left: 20%; animation-delay: 0s; }
  .garden-flower.f2{ left: 25%; animation-delay: 0.5s; }
  .garden-flower.f3{ left: 60%; animation-delay: 1s; }
  .garden-flower.f4{ right: 25%; animation-delay: 0.3s; }
  .garden-flower.f5{ right: 20%; animation-delay: 0.8s; }

  .flower-stem{
    width: 2px;
    height: 25px;
    background: #4a7c4e;
    margin: 0 auto;
  }

  .flower-petals{
    width: 16px;
    height: 16px;
    position: relative;
    margin: 0 auto;
  }

  .flower-petal{
    width: 8px;
    height: 8px;
    border-radius: 50%;
    position: absolute;
  }

  .flower-petal.red{ background: #ff6b9d; }
  .flower-petal.yellow{ background: #ffd700; }
  .flower-petal.pink{ background: #ff69b4; }
  .flower-petal.purple{ background: #da70d6; }

  .flower-petal:nth-child(1){ top: -4px; left: 4px; }
  .flower-petal:nth-child(2){ top: 4px; left: -4px; }
  .flower-petal:nth-child(3){ top: 4px; right: -4px; }
  .flower-petal:nth-child(4){ bottom: -4px; left: 4px; }

  .flower-center{
    width: 6px;
    height: 6px;
    background: #ffd700;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  /* Animales */
  .animal{
    position: absolute;
    bottom: 25px;
    font-size: 24px;
    animation: animalMove 8s ease-in-out infinite;
  }

  .animal.butterfly{
    left: 55%;
    animation: butterflyFly 6s ease-in-out infinite;
  }

  .animal.bird{
    right: 30%;
    animation: birdFly 7s ease-in-out infinite;
  }

  @keyframes animalMove{
    0%, 100%{ transform: translateY(0); }
    50%{ transform: translateY(-10px); }
  }

  @keyframes butterflyFly{
    0%, 100%{ transform: translate(0, 0); }
    50%{ transform: translate(20px, -15px); }
  }

  @keyframes birdFly{
    0%, 100%{ transform: translate(0, 0); }
    50%{ transform: translate(-25px, -20px); }
  }

  @media (max-width:768px){
    .garden{ height: 80px; }
    .stick-person{ transform: scale(0.8); }
    .tree{ transform: scale(0.7); }
    .garden-flower{ transform: scale(0.8); }
    .animal{ font-size: 18px; }
  }

  /* Layout */
  .stage{
    width: 92vw;
    max-width: 950px;
    height: 62vh;
    max-height: 520px;
    min-height: 400px;
    position: relative;
    perspective: 1200px;
    z-index:1;
  }

  /* Card base */
  .card{
    box-sizing: border-box;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #ffe8f0 0%, #fff5f8 50%, #ffffff 100%);
    border-radius: 32px;
    border: 3px solid rgba(255,77,145,0.25);
    box-shadow: 0 30px 60px rgba(255,77,145,0.15), 0 10px 20px rgba(0,0,0,0.08);
    padding: 40px 45px;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    transform-origin:center;
    transition: transform 700ms cubic-bezier(.2,.9,.25,1), opacity 400ms;
    opacity:0;
    transform: translateY(18px) scale(.98);
  }

  .card.show{
    opacity:1;
    transform: translateY(0) scale(1);
  }

  h1{
    margin: 0 0 12px 0;
    font-size: 52px;
    font-weight: 700;
    background: linear-gradient(135deg, #ff1493 0%, #ff69b4 50%, #ff8dc7 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-align:center;
    letter-spacing: 1px;
    filter: drop-shadow(0 2px 4px rgba(255,20,147,0.2));
  }

  .sub{
    color: #a67c96;
    font-size: 17px;
    margin-top: 16px;
    font-weight: 500;
    letter-spacing: 0.3px;
  }

  /* Floating emoji */
  .icon-wrap{
    width: 140px;
    height: 140px;
    display:flex;
    align-items:center;
    justify-content:center;
    margin: 12px 0;
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float{
    0%{ transform: translateY(0) rotate(-3deg); }
    50%{ transform: translateY(-12px) rotate(3deg); }
    100%{ transform: translateY(0) rotate(-3deg); }
  }

  /* Buttons */
  .btn{
    margin-top: 26px;
    background: linear-gradient(135deg, #ff1493 0%, #ff4d91 50%, #ff69b4 100%);
    border:none;
    color:white;
    font-weight:700;
    padding: 15px 40px;
    border-radius: 50px;
    cursor:pointer;
    box-shadow: 0 10px 30px rgba(255,20,147,0.35);
    transform: translateY(0);
    transition: transform 200ms ease, box-shadow 200ms, background 200ms;
    font-size:17px;
    letter-spacing: 0.5px;
  }
  .btn:hover{
    background: linear-gradient(135deg, #ff0080 0%, #ff3385 50%, #ff5599 100%);
    box-shadow: 0 12px 35px rgba(255,20,147,0.45);
    transform: translateY(-2px);
  }
  .btn:active{ transform: translateY(1px) scale(.98); box-shadow: 0 5px 15px rgba(255,20,147,0.3); }
  .btn:focus{ outline: 3px solid rgba(255,77,145,0.3); outline-offset: 2px; }

  /* small sparkle */
  .sparkles{
    display:inline-block;
    margin-left:10px;
    opacity: .95;
  }

  /* --- second screen: envelope --- */
  .envelope{
    width: 200px;
    height: 140px;
    position: relative;
    transform-origin: center bottom;
    transition: transform 700ms cubic-bezier(.2,.9,.25,1);
    cursor: pointer;
    filter: drop-shadow(0 8px 16px rgba(0,0,0,0.1));
  }
  .envelope:hover{
    transform: scale(1.05) translateY(-5px);
  }
  .env-body{
    width:100%;
    height:70%;
    background: linear-gradient(180deg,#ffffff,#fff8fb);
    border-radius:12px;
    border: 2px solid rgba(255,77,145,0.2);
    position:absolute;
    bottom:0;
    box-shadow: 0 15px 30px rgba(0,0,0,0.08);
  }
  .env-flap{
    position:absolute;
    top:0;
    left:0;
    right:0;
    height: 80px;
    transform-origin: center top;
    background: linear-gradient(180deg,#ffe8f5,#fff);
    border-radius:12px 12px 0 0;
    border-bottom: 2px solid rgba(255,77,145,0.12);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:56px;
    transition: transform 650ms cubic-bezier(.2,.9,.25,1);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.8);
  }

  .screen{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; }
  .screen[data-visible="false"]{ pointer-events:none; opacity:0; transform: scale(.98); transition: opacity 300ms, transform 300ms; }
  .screen[data-visible="true"]{ pointer-events:auto; opacity:1; transform: scale(1); transition: opacity 450ms, transform 450ms; }

  .letter{
    width: 90%;
    height: 78%;
    background: linear-gradient(135deg,#fff9fc 0%, #ffffff 100%);
    border-radius: 18px;
    border: 3px dashed rgba(255,77,145,0.3);
    padding: 28px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    transform: translateY(60px) rotateX(16deg);
    opacity:0;
    transition: transform 700ms ease, opacity 500ms;
    box-sizing: border-box;
    position: relative;
    overflow-y: auto;
  }
  
  .letter::-webkit-scrollbar {
    width: 6px;
  }
  
  .letter::-webkit-scrollbar-track {
    background: rgba(255,77,145,0.1);
    border-radius: 10px;
  }
  
  .letter::-webkit-scrollbar-thumb {
    background: rgba(255,77,145,0.4);
    border-radius: 10px;
  }
  
  .letter::-webkit-scrollbar-thumb:hover {
    background: rgba(255,77,145,0.6);
  }
  
  .letter::before{
    content: 'üíï';
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 28px;
    opacity: 0.6;
  }

  .letter.revealed{
    transform: translateY(0) rotateX(0);
    opacity:1;
  }

  .letter h2{
    margin:0 0 12px 0;
    color: #ff1493;
    font-size:24px;
    font-weight: 700;
  }
  .letter p{
    color: #a67c96;
    line-height:1.7;
    margin: 10px 0 0 0;
    font-size:15px;
  }
  .letter .signature{
    text-align:right;
    margin-top:24px;
    color: #ff1493;
    font-weight:700;
    font-size:17px;
  }
 
    /* Bot√≥n de m√∫sica */
  .music-btn{
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #ff1493 0%, #ff69b4 100%);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 28px;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(255,20,147,0.4);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 200ms, box-shadow 200ms;
  }
  
  .music-btn:hover{
    transform: scale(1.1);
    box-shadow: 0 10px 25px rgba(255,20,147,0.5);
  }
  
  .music-btn:active{
    transform: scale(0.95);
  }
  
  .music-btn.playing{
    animation: musicPulse 1s ease-in-out infinite;
  }
  
  @keyframes musicPulse{
    0%, 100%{ transform: scale(1); }
    50%{ transform: scale(1.05); }
  }

  @media (max-width:520px){
    .music-btn{
      width: 50px;
      height: 50px;
      font-size: 24px;
      bottom: 15px;
      right: 15px;
    }
  }

  @media (max-width:520px){
    .stage{ height:68vh; max-height:680px; }
    h1{ font-size:36px; }
    .card{ padding:28px 20px; border-radius:24px; }
    .icon-wrap{ width:110px; height:110px; }
    .sub{ font-size:15px; }
    .btn{ padding:12px 32px; font-size:15px; }
    .envelope{ width:160px; height:115px; }
    .env-flap{ height:65px; font-size:48px; }
    .letter{ padding:20px; height:80%; }
    .letter h2{ font-size:20px; }
    .letter p{ font-size:13px; line-height:1.6; }
    .letter .signature{ font-size:15px; }
    .letter::before{ font-size:22px; top:12px; right:15px; }
  }

  @media (max-width:400px){
    h1{ font-size:30px; }
    .card{ padding:20px 16px; }
    .icon-wrap{ width:90px; height:90px; }
    .sub{ font-size:14px; }
    .btn{ padding:10px 24px; font-size:14px; }
    .envelope{ width:140px; height:100px; }
    .env-flap{ height:55px; font-size:40px; }
    .letter{ padding:16px; height:82%; }
    .letter h2{ font-size:18px; }
    .letter p{ font-size:12px; }
    .letter .signature{ font-size:14px; margin-top:16px; }
  }

  @media (min-width:768px) and (max-width:1024px){
    .stage{ width:85vw; height:60vh; }
    h1{ font-size:48px; }
    .icon-wrap{ width:130px; height:130px; }
  }

  @media (max-height:600px){
    .stage{ height:85vh; max-height:none; }
    .card{ padding:20px; }
    h1{ font-size:32px; margin-bottom:8px; }
    .icon-wrap{ width:80px; height:80px; margin:8px 0; }
    .sub{ margin-top:10px; font-size:14px; }
    .btn{ margin-top:14px; padding:10px 28px; }
    .letter{ padding:16px; height:82%; }
    .letter p{ margin:6px 0 0 0; font-size:13px; }
  }
  #play-overlay{
    position: fixed;
    right: 14px;
    bottom: 14px;
    z-index: 9999;
    display: none;
  }
  #play-overlay button{
    background: linear-gradient(180deg,#ff7aa6,#ff4d91);
    color:white;border:none;padding:10px 14px;border-radius:999px;font-weight:700;
    box-shadow:0 8px 20px rgba(0,0,0,0.16); cursor:pointer;
  }